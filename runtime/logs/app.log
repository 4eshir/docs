2022-05-11 16:48:58 [127.0.0.1][1][3qt1vu1tt10a39oeu70b3r92fi0tfj3b][error][yii\db\Exception] PDOException: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '\'2019-12-31\' and `training_group`.`start_date` < \'2021-12-31\' GROUP BY `visi' at line 1 in C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\db\Command.php:1302
Stack trace:
#0 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\db\Command.php(1302): PDOStatement->execute()
#1 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\db\Command.php(1102): yii\db\Command->internalExecute('SELECT `foreign...')
#2 C:\OpenServer\domains\localhost\docs\models\components\ExcelWizard.php(600): yii\db\Command->execute()
#3 C:\OpenServer\domains\localhost\docs\controllers\ReportFormController.php(72): app\models\components\ExcelWizard::DownloadDoDop1('2022-01-01', '2023-01-01', NULL)
#4 [internal function]: app\controllers\ReportFormController->actionDoDop1()
#5 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\base\InlineAction.php(57): call_user_func_array(Array, Array)
#6 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\base\Controller.php(178): yii\base\InlineAction->runWithParams(Array)
#7 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\base\Module.php(552): yii\base\Controller->runAction('do-dop-1', Array)
#8 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\web\Application.php(103): yii\base\Module->runAction('report-form/do-...', Array)
#9 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\base\Application.php(384): yii\web\Application->handleRequest(Object(yii\web\Request))
#10 C:\OpenServer\domains\localhost\docs\web\index.php(13): yii\base\Application->run()
#11 {main}

Next yii\db\Exception: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '\'2019-12-31\' and `training_group`.`start_date` < \'2021-12-31\' GROUP BY `visi' at line 1
The SQL being executed was: SELECT `foreign_event_participants`.`secondname`, `foreign_event_participants`.`firstname`, `foreign_event_participants`.`patronymic` FROM `visit` JOIN `training_group_lesson` on `training_group_lesson`.`id` = `visit`.`training_group_lesson_id` JOIN `training_group` on `training_group`.`id` = `training_group_lesson`.`training_group_id` JOIN `foreign_event_participants` on `foreign_event_participants`.`id` = `visit`.`foreign_event_participant_id` WHERE `visit`.`status` = 0 and `training_group`.`start_date` > \'2019-12-31\' and `training_group`.`start_date` < \'2021-12-31\' GROUP BY `visit`.`foreign_event_participant_id` HAVING count(`status`) > 4 in C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\db\Schema.php:676
Stack trace:
#0 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\db\Command.php(1307): yii\db\Schema->convertException(Object(PDOException), 'SELECT `foreign...')
#1 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\db\Command.php(1102): yii\db\Command->internalExecute('SELECT `foreign...')
#2 C:\OpenServer\domains\localhost\docs\models\components\ExcelWizard.php(600): yii\db\Command->execute()
#3 C:\OpenServer\domains\localhost\docs\controllers\ReportFormController.php(72): app\models\components\ExcelWizard::DownloadDoDop1('2022-01-01', '2023-01-01', NULL)
#4 [internal function]: app\controllers\ReportFormController->actionDoDop1()
#5 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\base\InlineAction.php(57): call_user_func_array(Array, Array)
#6 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\base\Controller.php(178): yii\base\InlineAction->runWithParams(Array)
#7 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\base\Module.php(552): yii\base\Controller->runAction('do-dop-1', Array)
#8 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\web\Application.php(103): yii\base\Module->runAction('report-form/do-...', Array)
#9 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\base\Application.php(384): yii\web\Application->handleRequest(Object(yii\web\Request))
#10 C:\OpenServer\domains\localhost\docs\web\index.php(13): yii\base\Application->run()
#11 {main}
Additional Information:
Array
(
    [0] => 42000
    [1] => 1064
    [2] => You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '\'2019-12-31\' and `training_group`.`start_date` < \'2021-12-31\' GROUP BY `visi' at line 1
)

2022-05-11 16:48:58 [127.0.0.1][1][3qt1vu1tt10a39oeu70b3r92fi0tfj3b][info][application] $_GET = [
    'r' => 'report-form/do-dop-1'
]

$_POST = [
    '_csrf' => 'k2oG5IHnZLUXoCgQ4Bp3Q9U_5a7em3cNbCG31J-nmiyrAjKe495T0nzTfX-6UQUmhEe0l-nKQz4-ZYSW5tfsGQ=='
    'ForeignEventReportModel' => [
        'start_date' => '2022-01-01'
        'end_date' => '2023-01-01'
    ]
]

$_FILES = []

$_COOKIE = [
    'PHPSESSID' => '3qt1vu1tt10a39oeu70b3r92fi0tfj3b'
    '_identity' => '04bdd8198866bcab9f7fcb73ecfaae7e95b017a33f4f656615ae17253aa7a3bba:2:{i:0;s:9:\"_identity\";i:1;s:45:\"[1,\"PATsN8FUOCjpbl5zd80jBQgl8H94QJEf\",362400]\";}'
    '_csrf' => '1957d573f132870d1a849d5cf7dfc56d7d457c3ff5eb8b2d4d18b03aca35b31aa:2:{i:0;s:5:\"_csrf\";i:1;s:32:\"8h4zb97gksUoZKreQxQ97Q43RD3Bypv5\";}'
]

$_SESSION = [
    '__flash' => []
    '__returnUrl' => 'http://docs/'
    'userSessionTimeout' => 8640000
    '__id' => 1
    '__authKey' => 'PATsN8FUOCjpbl5zd80jBQgl8H94QJEf'
    'show' => 'common'
    'type' => null
]

$_SERVER = [
    'HTTP_HOST' => 'docs'
    'HTTP_CONNECTION' => 'keep-alive'
    'CONTENT_LENGTH' => '198'
    'HTTP_CACHE_CONTROL' => 'max-age=0'
    'HTTP_UPGRADE_INSECURE_REQUESTS' => '1'
    'HTTP_ORIGIN' => 'http://docs'
    'CONTENT_TYPE' => 'application/x-www-form-urlencoded'
    'HTTP_USER_AGENT' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36'
    'HTTP_ACCEPT' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9'
    'HTTP_REFERER' => 'http://docs/index.php?r=report-form%2Fdo-dop-1'
    'HTTP_ACCEPT_ENCODING' => 'gzip, deflate'
    'HTTP_ACCEPT_LANGUAGE' => 'ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7'
    'HTTP_COOKIE' => 'PHPSESSID=3qt1vu1tt10a39oeu70b3r92fi0tfj3b; _identity=04bdd8198866bcab9f7fcb73ecfaae7e95b017a33f4f656615ae17253aa7a3bba%3A2%3A%7Bi%3A0%3Bs%3A9%3A%22_identity%22%3Bi%3A1%3Bs%3A45%3A%22%5B1%2C%22PATsN8FUOCjpbl5zd80jBQgl8H94QJEf%22%2C362400%5D%22%3B%7D; _csrf=1957d573f132870d1a849d5cf7dfc56d7d457c3ff5eb8b2d4d18b03aca35b31aa%3A2%3A%7Bi%3A0%3Bs%3A5%3A%22_csrf%22%3Bi%3A1%3Bs%3A32%3A%228h4zb97gksUoZKreQxQ97Q43RD3Bypv5%22%3B%7D'
    'PATH' => 'c:\\openserver\\modules\\php\\PHP_7.2\\ext;c:\\openserver\\modules\\php\\PHP_7.2\\pear;c:\\openserver\\modules\\php\\PHP_7.2\\pear\\bin;c:\\openserver\\modules\\php\\PHP_7.2;c:\\openserver\\modules\\wget\\bin;c:\\openserver\\modules\\database\\MariaDB-10.3\\bin;c:\\openserver\\modules\\http\\Apache_2.4-PHP_7.0-7.1\\bin;c:\\openserver\\modules\\http\\Apache_2.4-PHP_7.0-7.1;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\system32\\Wbem;C:\\Windows\\SysWOW64'
    'SystemRoot' => 'C:\\Windows'
    'COMSPEC' => 'C:\\Windows\\system32\\cmd.exe'
    'PATHEXT' => '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC'
    'WINDIR' => 'C:\\Windows'
    'SERVER_SIGNATURE' => ''
    'SERVER_SOFTWARE' => 'Apache'
    'SERVER_NAME' => 'docs'
    'SERVER_ADDR' => '127.0.0.1'
    'SERVER_PORT' => '80'
    'REMOTE_ADDR' => '127.0.0.1'
    'DOCUMENT_ROOT' => 'C:/OpenServer/domains/localhost/docs/web'
    'REQUEST_SCHEME' => 'http'
    'CONTEXT_PREFIX' => ''
    'CONTEXT_DOCUMENT_ROOT' => 'C:/OpenServer/domains/localhost/docs/web'
    'SERVER_ADMIN' => '[no address given]'
    'SCRIPT_FILENAME' => 'C:/OpenServer/domains/localhost/docs/web/index.php'
    'REMOTE_PORT' => '53384'
    'GATEWAY_INTERFACE' => 'CGI/1.1'
    'SERVER_PROTOCOL' => 'HTTP/1.1'
    'REQUEST_METHOD' => 'POST'
    'QUERY_STRING' => 'r=report-form%2Fdo-dop-1'
    'REQUEST_URI' => '/index.php?r=report-form%2Fdo-dop-1'
    'SCRIPT_NAME' => '/index.php'
    'PHP_SELF' => '/index.php'
    'REQUEST_TIME_FLOAT' => 1652276938.183
    'REQUEST_TIME' => 1652276938
    'argv' => [
        0 => 'r=report-form%2Fdo-dop-1'
    ]
    'argc' => 1
]
2022-05-11 16:49:44 [127.0.0.1][1][-][error][yii\base\ErrorException:2] yii\base\ErrorException: Cannot modify header information - headers already sent by (output started at C:\OpenServer\domains\localhost\docs\models\components\ExcelWizard.php:601) in C:\OpenServer\domains\localhost\docs\models\components\ExcelWizard.php:938
Stack trace:
#0 [internal function]: yii\base\ErrorHandler->handleError(2, 'Cannot modify h...', 'C:\\OpenServer\\d...', 938, Array)
#1 C:\OpenServer\domains\localhost\docs\models\components\ExcelWizard.php(938): header('Content-Type: a...')
#2 C:\OpenServer\domains\localhost\docs\controllers\ReportFormController.php(72): app\models\components\ExcelWizard::DownloadDoDop1('2022-01-01', '2023-01-01', NULL)
#3 [internal function]: app\controllers\ReportFormController->actionDoDop1()
#4 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\base\InlineAction.php(57): call_user_func_array(Array, Array)
#5 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\base\Controller.php(178): yii\base\InlineAction->runWithParams(Array)
#6 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\base\Module.php(552): yii\base\Controller->runAction('do-dop-1', Array)
#7 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\web\Application.php(103): yii\base\Module->runAction('report-form/do-...', Array)
#8 C:\OpenServer\domains\localhost\docs\vendor\yiisoft\yii2\base\Application.php(384): yii\web\Application->handleRequest(Object(yii\web\Request))
#9 C:\OpenServer\domains\localhost\docs\web\index.php(13): yii\base\Application->run()
#10 {main}
2022-05-11 16:49:44 [127.0.0.1][1][-][info][application] $_GET = [
    'r' => 'report-form/do-dop-1'
]

$_POST = [
    '_csrf' => 'k2oG5IHnZLUXoCgQ4Bp3Q9U_5a7em3cNbCG31J-nmiyrAjKe495T0nzTfX-6UQUmhEe0l-nKQz4-ZYSW5tfsGQ=='
    'ForeignEventReportModel' => [
        'start_date' => '2022-01-01'
        'end_date' => '2023-01-01'
    ]
]

$_FILES = []

$_COOKIE = [
    'PHPSESSID' => '3qt1vu1tt10a39oeu70b3r92fi0tfj3b'
    '_identity' => '04bdd8198866bcab9f7fcb73ecfaae7e95b017a33f4f656615ae17253aa7a3bba:2:{i:0;s:9:\"_identity\";i:1;s:45:\"[1,\"PATsN8FUOCjpbl5zd80jBQgl8H94QJEf\",362400]\";}'
    '_csrf' => '1957d573f132870d1a849d5cf7dfc56d7d457c3ff5eb8b2d4d18b03aca35b31aa:2:{i:0;s:5:\"_csrf\";i:1;s:32:\"8h4zb97gksUoZKreQxQ97Q43RD3Bypv5\";}'
]

$_SESSION = [
    '__flash' => []
    '__returnUrl' => 'http://docs/'
    'userSessionTimeout' => 8640000
    '__id' => 1
    '__authKey' => 'PATsN8FUOCjpbl5zd80jBQgl8H94QJEf'
    'show' => 'common'
    'type' => null
]

$_SERVER = [
    'HTTP_HOST' => 'docs'
    'HTTP_CONNECTION' => 'keep-alive'
    'CONTENT_LENGTH' => '198'
    'HTTP_CACHE_CONTROL' => 'max-age=0'
    'HTTP_UPGRADE_INSECURE_REQUESTS' => '1'
    'HTTP_USER_AGENT' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36'
    'HTTP_ORIGIN' => 'http://docs'
    'CONTENT_TYPE' => 'application/x-www-form-urlencoded'
    'HTTP_ACCEPT' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9'
    'HTTP_REFERER' => 'http://docs/index.php?r=report-form%2Fdo-dop-1'
    'HTTP_ACCEPT_ENCODING' => 'gzip, deflate'
    'HTTP_ACCEPT_LANGUAGE' => 'ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7'
    'HTTP_COOKIE' => 'PHPSESSID=3qt1vu1tt10a39oeu70b3r92fi0tfj3b; _identity=04bdd8198866bcab9f7fcb73ecfaae7e95b017a33f4f656615ae17253aa7a3bba%3A2%3A%7Bi%3A0%3Bs%3A9%3A%22_identity%22%3Bi%3A1%3Bs%3A45%3A%22%5B1%2C%22PATsN8FUOCjpbl5zd80jBQgl8H94QJEf%22%2C362400%5D%22%3B%7D; _csrf=1957d573f132870d1a849d5cf7dfc56d7d457c3ff5eb8b2d4d18b03aca35b31aa%3A2%3A%7Bi%3A0%3Bs%3A5%3A%22_csrf%22%3Bi%3A1%3Bs%3A32%3A%228h4zb97gksUoZKreQxQ97Q43RD3Bypv5%22%3B%7D'
    'PATH' => 'c:\\openserver\\modules\\php\\PHP_7.2\\ext;c:\\openserver\\modules\\php\\PHP_7.2\\pear;c:\\openserver\\modules\\php\\PHP_7.2\\pear\\bin;c:\\openserver\\modules\\php\\PHP_7.2;c:\\openserver\\modules\\wget\\bin;c:\\openserver\\modules\\database\\MariaDB-10.3\\bin;c:\\openserver\\modules\\http\\Apache_2.4-PHP_7.0-7.1\\bin;c:\\openserver\\modules\\http\\Apache_2.4-PHP_7.0-7.1;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\system32\\Wbem;C:\\Windows\\SysWOW64'
    'SystemRoot' => 'C:\\Windows'
    'COMSPEC' => 'C:\\Windows\\system32\\cmd.exe'
    'PATHEXT' => '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC'
    'WINDIR' => 'C:\\Windows'
    'SERVER_SIGNATURE' => ''
    'SERVER_SOFTWARE' => 'Apache'
    'SERVER_NAME' => 'docs'
    'SERVER_ADDR' => '127.0.0.1'
    'SERVER_PORT' => '80'
    'REMOTE_ADDR' => '127.0.0.1'
    'DOCUMENT_ROOT' => 'C:/OpenServer/domains/localhost/docs/web'
    'REQUEST_SCHEME' => 'http'
    'CONTEXT_PREFIX' => ''
    'CONTEXT_DOCUMENT_ROOT' => 'C:/OpenServer/domains/localhost/docs/web'
    'SERVER_ADMIN' => '[no address given]'
    'SCRIPT_FILENAME' => 'C:/OpenServer/domains/localhost/docs/web/index.php'
    'REMOTE_PORT' => '53385'
    'GATEWAY_INTERFACE' => 'CGI/1.1'
    'SERVER_PROTOCOL' => 'HTTP/1.1'
    'REQUEST_METHOD' => 'POST'
    'QUERY_STRING' => 'r=report-form%2Fdo-dop-1'
    'REQUEST_URI' => '/index.php?r=report-form%2Fdo-dop-1'
    'SCRIPT_NAME' => '/index.php'
    'PHP_SELF' => '/index.php'
    'REQUEST_TIME_FLOAT' => 1652276984.486
    'REQUEST_TIME' => 1652276984
    'argv' => [
        0 => 'r=report-form%2Fdo-dop-1'
    ]
    'argc' => 1
]
